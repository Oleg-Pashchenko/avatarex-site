<div class="mb-5">
    <h5 class="mt-5">Если вы хотите проводить квалификацию клиента, пожалуйста, добавьте поля:</h5>
    <legend class="border-bottom mb-4"></legend>
    <div id="loaded-elements">
        {% for k, v in qualification_rules.value.items %}

            <div style="border: 3px solid rgb(114, 119, 240); border-radius: 10px; padding: 5px 5px 5px 5px; margin-bottom: 15px;">
                <div class="rule input-group-prepend">
                    <div class="col-3 p-0 pr-1 mb-2">
                        <input name="field-name" class="input-group-text" value="{{ k }}">
                    </div>
                    <div class=" pl-1 pr-0 col-8">
                        <input class="form-control q" name="field-value" value="{{ v }}">
                    </div>
                    <button type="button" class="ml-1 ml-0 h-50 btn btn-outline-danger"
                            onclick="deleteLoadedQualificationField(this.parentNode.parentNode);">Удалить
                    </button>
                </div>
                <div class="rule input-group-prepend text-center ">
                    <div class="mt-0 col-12">
                        <div class="btn text-light" style="display: inline-block; width: auto;"
                             onclick="toggleVisibility(this.parentElement.parentElement.nextElementSibling)">
                            <hr class="line"
                                style=" border-top: 1px solid #ffffff; width: 100px; display: inline-block; margin: 0;padding-bottom: 5px">
                            ещё
                            <hr class="line"
                                style=" border-top: 1px solid #ffffff; width: 100px; display: inline-block; margin: 0;padding-bottom: 5px">
                        </div>
                    </div>

                </div>
                <div class="rule input-group-prepend mb-2" id="hiddenDiv" style="display: none;">
                    <button class="input-group-text mb-2 ml-1" type="button" id="plus_field"
                            onclick="addResponseField(0);">Добавить поле
                    </button>
                    <div id="loaded-inter-elements">
                        <div class=" pl-1 pr-0 mb-2 col-12" style="display: flex; align-items: center;">
                            <input style="flex: 1; width: 100%;display: inline-block;" placeholder="Ваше сообщение"
                                   class="form-control q col-8" name="field-value" value="{{ y }}">
                            <select name="rule-select"
                                    style="background-color: rgb(38, 47, 60); color: white; border: solid rgb(38, 47, 60); font-size: large; display: inline-block;box-sizing: border-box; width: 40%;"
                                    class="form-control col-3 ml-2 mr-2" id="exampleFormControlSelect1">
                                <option name="0" style="text-align: center; font-size: large;"></option>
                                <option name="1" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '1' %}selected{% endif %}>1
                                </option>
                                <option name="2" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>2
                                </option>
                                <option name="3" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '3' %}selected{% endif %}>3
                                </option>
                                <option name="4" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '4' %}selected{% endif %}>4
                                </option>
                                <option name="5" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '5' %}selected{% endif %}>5
                                </option>
                                <option name="6" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '6' %}selected{% endif %}>6
                                </option>
                                <option name="7" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '7' %}selected{% endif %}>7
                                </option>
                                <option name="8" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '8' %}selected{% endif %}>8
                                </option>
                                <option name="9" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '9' %}selected{% endif %}>9
                                </option>
                                <option name="10" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '10' %}selected{% endif %}>10
                                </option>
                                <option name="15" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '15' %}selected{% endif %}>15
                                </option>
                                <option name="25" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '25' %}selected{% endif %}>25
                                </option>
                                <option name="30" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '30' %}selected{% endif %}>30
                                </option>
                            </select>
                            <select name="rule-select"
                                    style="background-color: rgb(38, 47, 60); color: white; border: solid rgb(38, 47, 60); font-size: large; display: inline-block;box-sizing: border-box; width: 40%;"
                                    class="form-control col-3 mr-2" id="exampleFormControlSelect1">
                                <option name="minutes" style="text-align: center; font-size: large;"></option>
                                <option name="minutes" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '1' %}selected{% endif %}>минут
                                </option>
                                <option name="hours" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>часов
                                </option>
                                <option name="days" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>дней
                                </option>
                            </select>
                            <button type="button" class="ml-1 ml-0 h-50 btn btn-outline-danger"
                                    onclick="deleteParentDiv(this);">Удалить
                            </button>
                        </div>
                    </div>
                    <div id="added-inter-elements-0"></div>
                </div>
            </div>
        {% endfor %}
    </div>
    <div id="added-elements"></div>

    <button class="input-group-text mt-2" type="button" id="plus_field" onclick="addQualificationField();">Добавить
        поле
    </button>

    <h6 class="mt-5">Сообщение после прохождения квалификации:</h6>
    <textarea style="min-height: 100px; background-color: rgb(26, 24, 22); color: white;" name="qualificationFinished" class="mt-2"
              id="qualificationFinished">{{ qualification_rules.qualification_finished }}</textarea>

</div>


<script>
    var counter1 = 0

    function addQualificationField() {
        var container = document.getElementById("added-elements");
        counter1++;
        var newInputField = document.createElement("div");
        newInputField.className = "";
        newInputField.innerHTML = `
        <div style="border: 3px solid rgb(114, 119, 240); border-radius: 10px; padding: 5px 5px 5px 5px; margin-bottom: 15px;">
                <div class="rule input-group-prepend">
                    <div class="col-3 p-0 pr-1 mb-2">
                        <input name="field-name" class="input-group-text" value="{{ k }}">
                    </div>
                    <div class=" pl-1 pr-0 col-8">
                        <input class="form-control q" name="field-value" value="{{ v }}">
                    </div>
                    <button type="button" class="ml-1 ml-0 h-50 btn btn-outline-danger"
                            onclick="deleteParentDiv(this)">Удалить
                    </button>
                </div>
                <div class="rule input-group-prepend text-center ">
                    <div class="mt-0 col-12">
                        <div class="btn text-light" style="display: inline-block; width: auto;"
                             onclick="toggleVisibility(this.parentElement.parentElement.nextElementSibling)">
                            <hr class="line"
                                style=" border-top: 1px solid #ffffff; width: 100px; display: inline-block; margin: 0;padding-bottom: 5px">
                            ещё
                            <hr class="line"
                                style=" border-top: 1px solid #ffffff; width: 100px; display: inline-block; margin: 0;padding-bottom: 5px">
                        </div>
                    </div>

                </div>
                <div class="rule input-group-prepend mb-2" id="hiddenDiv" style="display: none;">
                    <button class="input-group-text mb-2 ml-1"  type="button" id="plus_field"
                            onclick="addResponseField(${counter1});">Добавить поле
                    </button>
                    <div id="loaded-inter-elements">
                        <div class=" pl-1 pr-0 mb-2 col-12" style="display: flex; align-items: center;">
                            <input style="flex: 1; width: 100%;display: inline-block;" placeholder="Ваше сообщение"
                                   class="form-control q col-8" name="field-value" value="{{ y }}">
                            <select name="rule-select"
                                    style="background-color: rgb(38, 47, 60); color: white; border: solid rgb(38, 47, 60); font-size: large; display: inline-block;box-sizing: border-box; width: 40%;"
                                    class="form-control col-3 ml-2 mr-2" id="exampleFormControlSelect1">
                                <option name="0" style="text-align: center; font-size: large;"></option>
                                <option name="1" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '1' %}selected{% endif %}>1
                                </option>
                                <option name="2" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>2
                                </option>
                                <option name="3" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '3' %}selected{% endif %}>3
                                </option>
                                <option name="4" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '4' %}selected{% endif %}>4
                                </option>
                                <option name="5" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '5' %}selected{% endif %}>5
                                </option>
                                <option name="6" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '6' %}selected{% endif %}>6
                                </option>
                                <option name="7" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '7' %}selected{% endif %}>7
                                </option>
                                <option name="8" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '8' %}selected{% endif %}>8
                                </option>
                                <option name="9" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '9' %}selected{% endif %}>9
                                </option>
                                <option name="10" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '10' %}selected{% endif %}>10
                                </option>
                                <option name="15" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '15' %}selected{% endif %}>15
                                </option>
                                <option name="25" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '25' %}selected{% endif %}>25
                                </option>
                                <option name="30" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '30' %}selected{% endif %}>30
                                </option>
                            </select>
                            <select name="rule-select"
                                    style="background-color: rgb(38, 47, 60); color: white; border: solid rgb(38, 47, 60); font-size: large; display: inline-block;box-sizing: border-box; width: 40%;"
                                    class="form-control col-3 mr-2" id="exampleFormControlSelect1">
                                <option name="minutes" style="text-align: center; font-size: large;"></option>
                                <option name="minutes" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '1' %}selected{% endif %}>минут
                                </option>
                                <option name="hours" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>часов
                                </option>
                                <option name="days" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>дней
                                </option>
                            </select>
                            <button type="button" class="ml-1 ml-0 h-50 btn btn-outline-danger"
                                    onclick="deleteParentDiv(this);">Удалить
                            </button>
                        </div>
                    </div>
                    <div id="added-inter-elements-${counter1}"></div>
                </div>
            </div>

            `;
        container.appendChild(newInputField);
    }
</script>

<script>
    function addResponseField(counter) {
        var container = document.getElementById("added-inter-elements-" + counter);
        var newInputField = document.createElement("div");
        newInputField.className = "";
        newInputField.innerHTML = `
        <div class=" pl-1 pr-0 mb-2 col-12" style="display: flex; align-items: center;">
                            <input style="flex: 1; width: 100%;display: inline-block;" placeholder="Ваше сообщение"
                                   class="form-control q col-8" name="field-value" value="{{ y }}">
                            <select name="rule-select"
                                    style="background-color: rgb(38, 47, 60); color: white; border: solid rgb(38, 47, 60); font-size: large; display: inline-block;box-sizing: border-box; width: 40%;"
                                    class="form-control col-3 ml-2 mr-2" id="exampleFormControlSelect1">
                                <option name="0" style="text-align: center; font-size: large;"></option>
                                <option name="1" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '1' %}selected{% endif %}>1
                                </option>
                                <option name="2" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>2
                                </option>
                                <option name="3" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '3' %}selected{% endif %}>3
                                </option>
                                <option name="4" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '4' %}selected{% endif %}>4
                                </option>
                                <option name="5" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '5' %}selected{% endif %}>5
                                </option>
                                <option name="6" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '6' %}selected{% endif %}>6
                                </option>
                                <option name="7" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '7' %}selected{% endif %}>7
                                </option>
                                <option name="8" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '8' %}selected{% endif %}>8
                                </option>
                                <option name="9" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '9' %}selected{% endif %}>9
                                </option>
                                <option name="10" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '10' %}selected{% endif %}>10
                                </option>
                                <option name="15" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '15' %}selected{% endif %}>15
                                </option>
                                <option name="25" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '25' %}selected{% endif %}>25
                                </option>
                                <option name="30" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '30' %}selected{% endif %}>30
                                </option>
                            </select>
                            <select name="rule-select"
                                    style="background-color: rgb(38, 47, 60); color: white; border: solid rgb(38, 47, 60); font-size: large; display: inline-block;box-sizing: border-box; width: 40%;"
                                    class="form-control col-3 mr-2" id="exampleFormControlSelect1">
                                <option name="minutes" style="text-align: center; font-size: large;"></option>
                                <option name="minutes" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '1' %}selected{% endif %}>минут
                                </option>
                                <option name="hours" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>часов
                                </option>
                                <option name="days" style="text-align: center; font-size: large;"
                                        {% if search_rule.v == '2' %}selected{% endif %}>дней
                                </option>
                            </select>
                            <button type="button" class="ml-1 ml-0 h-50 btn btn-outline-danger"
                                    onclick="deleteParentDiv(this);">Удалить
                            </button>
                        </div>

            `;
        container.appendChild(newInputField);
    }
</script>

<script>
    function deleteQualificationField(element) {
        var container = document.getElementById("added-elements");
        container.removeChild(element);
    }
</script>


<script>
    function deleteLoadedQualificationField(element) {
        var container = document.getElementById("loaded-elements");
        container.removeChild(element);
    }
</script>

<script>
    function toggleVisibility(element) {
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }

</script>

<script>
    function deleteParentDiv(element) {
        var parentDiv = element.parentNode.parentNode;
        parentDiv.parentNode.removeChild(parentDiv);
    }
</script>
